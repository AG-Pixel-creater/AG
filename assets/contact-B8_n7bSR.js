import{a as m,h as u,f}from"./firebase-config-Cb8eZSHr.js";import"./home-B4wQG33H.js";import{g as y,a as g,c as E}from"./index.esm2017-CrPWAD4H.js";const v=y(),r=document.getElementById("contactForm"),s=document.querySelector(".submit-btn");r.addEventListener("submit",async e=>{var i;e.preventDefault(),s.disabled=!0,s.textContent="Sending...";const a=document.getElementById("name").value.trim(),o=document.getElementById("email").value.trim(),n=document.getElementById("message").value.trim();try{if(!a||!o||!n)throw new Error("Please fill in all fields");const t={name:a,email:o,message:n,timestamp:new Date,userId:((i=m.currentUser)==null?void 0:i.uid)||"anonymous",status:"unread"},d=await g(E(v,"messages"),t);try{const c=await u(f,"notifyAdmin")({messageId:d.id,sender:a,preview:n.substring(0,100)});c.data.success||console.warn("Notification not sent:",c.data.error)}catch(l){console.error("Notification error:",l)}alert("Message sent successfully!"),r.reset()}catch(t){console.error("Error details:",t),alert(t.message||"Failed to send message. Please try again.")}finally{s.disabled=!1,s.textContent="Send Message"}});const b=r.querySelectorAll("input, textarea");b.forEach(e=>{e.addEventListener("input",()=>{e.setCustomValidity(""),e.checkValidity()}),e.addEventListener("invalid",()=>{e.value.trim()===""&&e.setCustomValidity("This field is required")})});
